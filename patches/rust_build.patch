@@ -99,7 +99,7 @@
 
 CLANG_SCRIPTS_DIR = os.path.join(CHROMIUM_DIR, 'tools', 'clang', 'scripts')
 
-RUST_GIT_URL = ('https://chromium.9oo91esource.qjz9zk/external/' +
+RUST_GIT_URL = ('https://' +
                 'github.com/rust-lang/rust')
 
 RUST_SRC_DIR = os.path.join(THIRD_PARTY_DIR, 'rust-src')
@@ -241,11 +241,11 @@
     # Pull the stage0 to find the package intended to be used to build this
     # version of the Rust compiler.
     STAGE0_JSON_URL = (
-        'https://chromium.9oo91esource.qjz9zk/external/github.com/'
-        'rust-lang/rust/+/{GIT_HASH}/src/stage0?format=TEXT')
-    base64_text = urllib.request.urlopen(
+        'https://raw.githubusercontent.com/'
+        'rust-lang/rust/{GIT_HASH}/src/stage0')
+    text = urllib.request.urlopen(
         STAGE0_JSON_URL.format(GIT_HASH=rust_git_hash)).read().decode("utf-8")
-    stage0 = base64.b64decode(base64_text).decode("utf-8")
+    stage0 = text
     lines = stage0.splitlines()
 
     # The stage0 file contains the path to all tarballs it uses binaries from.
@@ -255,8 +255,8 @@
         if (filename + '.tar.gz') in l:
             package_tgz = l.split('=')[0]
 
-    DownloadAndUnpack(f'{server}/{package_tgz}', LLVM_BUILD_TOOLS_DIR)
-    return os.path.join(LLVM_BUILD_TOOLS_DIR, filename)
+    #DownloadAndUnpack(f'{server}/{package_tgz}', LLVM_BUILD_TOOLS_DIR)
+    return os.path.join('/', '.')
 
 
 def InstallBetaPackage(package_dir, install_dir):
@@ -590,6 +590,9 @@
             '--with-ml-inliner-model=',
             # Not using this in Rust yet, see also crbug.com/1476464.
             '--without-zstd',
+            '--host-cc=/usr/bin/clang',
+            '--host-cxx=/usr/bin/clang++',
+            '--use-system-cmake',
         ]
         if llvm_force_head_revision:
             build_cmd.append('--llvm-force-head-revision')
@@ -780,11 +783,11 @@
             return 1
 
     debian_sysroot = None
-    if sys.platform.startswith('linux') and not args.sync_for_gnrt:
+    #if sys.platform.startswith('linux') and not args.sync_for_gnrt:
         # Fetch sysroot we build rustc against. This ensures a minimum supported
         # host (not Chromium target). Since the rustc linux package is for
         # x86_64 only, that is the sole needed sysroot.
-        debian_sysroot = DownloadDebianSysroot('amd64', args.skip_checkout)
+    #    debian_sysroot = DownloadDebianSysroot('amd64', args.skip_checkout)
 
     # Require zlib compression.
     if sys.platform == 'win32':
@@ -801,9 +804,9 @@
     # TODO(crbug.com/40205621): OpenSSL is somehow already present on the
     # Windows builder, but we should change to using a package from 3pp when it
     # is available.
-    if (sys.platform != 'win32' and not args.sync_for_gnrt):
+    #if (sys.platform != 'win32' and not args.sync_for_gnrt):
         # Building cargo depends on OpenSSL.
-        AddOpenSSLToEnv()
+    #    AddOpenSSLToEnv()
 
     xpy = XPy(zlib_path, libxml2_dirs, debian_sysroot, args.verbose)
 
@@ -887,7 +890,7 @@
     # If we're pulling the most recent rust, we shouldn't expect its stage 0
     # hash to match the pinned one.
     if not args.rust_force_head_revision:
-        VerifyStage0JsonHash()
+        print("skipping") #VerifyStage0JsonHash()
     if args.verify_stage0_hash:
         # The above function exits and prints the actual hash if
         # verification failed so we just quit here; if we reach this point,
@@ -896,7 +899,7 @@
 
     BuildLLVMLibraries(args.skip_llvm_build, args.llvm_force_head_revision)
 
-    AddCMakeToPath()
+    #AddCMakeToPath()
 
     # Set up config.toml in Rust source tree.
     xpy.configure()
